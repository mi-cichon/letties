<div class="chat-wrapper">
  <button
    class="collapse-toggle"
    (click)="toggleCollapse()"
    [title]="isCollapsed() ? 'Pokaż czat' : 'Ukryj czat'"
  >
    {{ isCollapsed() ? '◀' : '▶' }}
  </button>

  <div class="messages-container" #scrollContainer>
    @for (msg of messages(); track $index) {
      <div class="message">
        <span class="author" [style.color]="msg.color || '#e2c08d'">{{ msg.author }}:</span>
        <span class="text">{{ msg.text }}</span>
      </div>
    } @empty {
      <div class="chat-empty" style="color: #666; text-align: center; margin-top: 2rem">
        <p>{{ 'chat.noMessages' | transloco }}</p>
      </div>
    }
  </div>

  <div class="input-area">
    <textarea
      #msgInput
      rows="1"
      [placeholder]="'chat.placeholder' | transloco"
      (keydown)="onKeyDown($event, msgInput)"
    ></textarea>

    <button class="send-btn" (click)="sendMessage(msgInput)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path
          d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </button>
  </div>
</div>
